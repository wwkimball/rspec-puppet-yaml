<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: RSpec::Puppet::MatcherHelpers
  
    &mdash; Documentation by YARD 0.9.9
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "RSpec::Puppet::MatcherHelpers";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (M)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span>
     &raquo; 
    <span class="title">MatcherHelpers</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: RSpec::Puppet::MatcherHelpers
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">RSpec::Puppet::MatcherHelpers</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/rspec-puppet/matcher_helpers.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A collection of static methods that simplify creating and building
rodjek&#39;s RSpec::Puppet::*Matchers. With <code>MatcherHelpers</code>,
you need call only its <code>.get_matcher_for</code> function with
arguments appropriate to the matcher you desire. Otherwise, you have to
know in advance which matcher you want and, at first, the relationship
between method, matcher, and namespace just isn&#39;t always obvious.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/rodjek/rspec-puppet" target="_parent" title="https://github.com/rodjek/rspec-puppet">https://github.com/rodjek/rspec-puppet</a></li>
    
  </ul>

</div>






  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_compile_matcher-class_method" title="get_compile_matcher (class method)">.<strong>get_compile_matcher</strong>(method, args = [], tests = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Gets a matcher for compile tests.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_contain_matcher-class_method" title="get_contain_matcher (class method)">.<strong>get_contain_matcher</strong>(method, args, tests = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Gets a matcher for :create<em>* and :contain</em>* tests.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_count_matcher-class_method" title="get_count_matcher (class method)">.<strong>get_count_matcher</strong>(method, args, tests = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Gets a matcher for have<em>*</em>resource_count tests.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_function_matcher-class_method" title="get_function_matcher (class method)">.<strong>get_function_matcher</strong>(method, args = [], tests = [])  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Gets a matcher for function (:run) tests.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_matcher_for-class_method" title="get_matcher_for (class method)">.<strong>get_matcher_for</strong>(method, args, tests = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Attempts to create and return an appropriate RSpec::Puppet::*Matcher for a
known matching method and its arguments.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_type_matcher-class_method" title="get_type_matcher (class method)">.<strong>get_type_matcher</strong>(method, args = [], tests = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Gets a matcher for custom type (:be_valid_type) tests.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="get_compile_matcher-class_method">
  
    .<strong>get_compile_matcher</strong>(method, args = [], tests = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Gets a matcher for compile tests.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>The class compiles with all dependencies, spelled out</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="RSpec::Puppet::MatcherHelpers (class)">MatcherHelpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_compile_matcher'>get_compile_matcher</span><span class='lparen'>(</span>
  <span class='symbol'>:compile</span><span class='comma'>,</span>
  <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='lbrace'>{</span> <span class='symbol'>:with_all_deps</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span> <span class='rbrace'>}</span>
<span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>The class compiles with all dependencies, simpler</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="RSpec::Puppet::MatcherHelpers (class)">MatcherHelpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_compile_matcher'>get_compile_matcher</span><span class='lparen'>(</span>
  <span class='symbol'>:compile</span><span class='comma'>,</span>
  <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='kw'>true</span>
<span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>method</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The :compile matcher type.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Optional[Variant[Integer,Array[Integer]]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p><strong>IGNORED</strong> in this version! Should a future version of the
compile matcher support constructor arguments, this will become useful.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tests</span>
      
      
        <span class='type'>(<tt>Optional[Hash[Variant[String,Symbol],Any]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Set of unit tests to apply to the matcher, expressed as <code>:method_call
=&gt; value(s)</code> tuples. Use <code>nil</code> as the value for
method_calls that don&#39;t accept arguments.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rspec-puppet/matcher_helpers.rb', line 214</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_compile_matcher'>get_compile_matcher</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_tests'>tests</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'>ManifestMatchers</span><span class='op'>::</span><span class='const'>Compile</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_test'>test</span><span class='op'>|</span> <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_test'>test</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nil</span><span class='tstring_end'>&#39;</span></span> <span class='op'>==</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
        <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_tests'>tests</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='comment'># Anything left is assumed to be a &#39;with_all_deps&#39; test...
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_tests'>tests</span>
      <span class='comment'># ...as long as it is &quot;truthy&quot;
</span>      <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:with_all_deps</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_matcher'>matcher</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_contain_matcher-class_method">
  
    .<strong>get_contain_matcher</strong>(method, args, tests = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Gets a matcher for :create<em>* and :contain</em>* tests.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>package { &#39;my-package&#39;: ensure =&gt; &#39;latest&#39;, provider
=&gt; &#39;apt&#39; }</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># Using the all-in-one `with` test
</span><span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="RSpec::Puppet::MatcherHelpers (class)">MatcherHelpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_contain_matcher'>get_contain_matcher</span><span class='lparen'>(</span>
  <span class='symbol'>:contain_package</span><span class='comma'>,</span>
  <span class='lbracket'>[</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my-package</span><span class='tstring_end'>&#39;</span></span> <span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='lbrace'>{</span> <span class='symbol'>:with</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
    <span class='symbol'>:ensure</span>   <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>latest</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='symbol'>:provider</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>apt</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span>
  <span class='rbrace'>}</span>
<span class='rparen'>)</span>

<span class='comment'># Using individual with_* tests
</span><span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="RSpec::Puppet::MatcherHelpers (class)">MatcherHelpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_contain_matcher'>get_contain_matcher</span><span class='lparen'>(</span>
  <span class='symbol'>:contain_package</span><span class='comma'>,</span>
  <span class='lbracket'>[</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my-package</span><span class='tstring_end'>&#39;</span></span> <span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='lbrace'>{</span> <span class='symbol'>:with_ensure</span>   <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>latest</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='symbol'>:with_provider</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>apt</span><span class='tstring_end'>&#39;</span></span>
  <span class='rbrace'>}</span>
<span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>method</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The full :create<em>* or :contain</em>* matcher type.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Array[Any]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Must be at least an Array with one element and the first element must be
the title of the resource under test. So, for <code>package {
&#39;my-package&#39;: ensure =&gt; &#39;latest&#39;, provider =&gt;
&#39;apt&#39; }</code>, this must be set to <code>[ &quot;my-package&quot;
]</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tests</span>
      
      
        <span class='type'>(<tt>Optional[Hash[Variant[String,Symbol],Any]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Set of unit tests to apply to the matcher, expressed as <code>:method_call
=&gt; value(s)</code> tuples. Use <code>nil</code> as the value for
method_calls that don&#39;t accept arguments.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>when a resource title is not supplied at <a href="0">args</a>.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rspec-puppet/matcher_helpers.rb', line 101</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_contain_matcher'>get_contain_matcher</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='id identifier rubyid_tests'>tests</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='comment'># For this matcher, args[0] must be a String value that is the title for
</span>  <span class='comment'># the resource under test.
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='op'>!</span><span class='id identifier rubyid_args'>args</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Contain/Create matchers require that the first argument be the title of the resource under test.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='lbracket'>[</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'>ManifestMatchers</span><span class='op'>::</span><span class='const'>CreateGeneric</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span>
    <span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='rparen'>)</span>

  <span class='comment'># Try to be lenient on the Hash requirement for tests
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_test'>test</span><span class='op'>|</span> <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_test'>test</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nil</span><span class='tstring_end'>&#39;</span></span> <span class='op'>==</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
        <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='comment'># Enable content tests to specify arrays so that multiple discrete
</span>        <span class='comment'># contents can be searched.
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_k'>k</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(with_|without_)?content</span><span class='regexp_end'>/</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_l'>l</span><span class='op'>|</span> <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='comma'>,</span> <span class='id identifier rubyid_l'>l</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='comment'># Anything left is assumed to be an &#39;ensure&#39; test
</span>    <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:with_ensure</span><span class='comma'>,</span> <span class='id identifier rubyid_tests'>tests</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_matcher'>matcher</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_count_matcher-class_method">
  
    .<strong>get_count_matcher</strong>(method, args, tests = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Gets a matcher for have<em>*</em>resource_count tests.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>1 package expected (count as an Array element)</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="RSpec::Puppet::MatcherHelpers (class)">MatcherHelpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_count_matcher'>get_count_matcher</span><span class='lparen'>(</span>
  <span class='symbol'>:have_package_resource_count</span><span class='comma'>,</span>
  <span class='lbracket'>[</span> <span class='int'>1</span> <span class='rbracket'>]</span>
<span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>12 files expected (count as a bare Integer)</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="RSpec::Puppet::MatcherHelpers (class)">MatcherHelpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_count_matcher'>get_count_matcher</span><span class='lparen'>(</span>
  <span class='symbol'>:have_file_resource_count</span><span class='comma'>,</span>
  <span class='int'>12</span>
<span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>method</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The full :have<em>*</em>resource_count matcher type.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Variant[Integer,Array[Integer]]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>May be either an Integer or an Array with exactly one element that is an
Integer. This is the number of the expected resource counted.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tests</span>
      
      
        <span class='type'>(<tt>Optional[Hash[Variant[String,Symbol],Any]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p><em>IGNORED</em> in this version! Should this matcher ever later support
additional tests, this will become the set of unit tests to apply to the
matcher, expressed as <code>:method_call =&gt; value(s)`` tuples. 
Use</code>nil` as the value for method_calls that don&#39;t accept
arguments.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rspec-puppet/matcher_helpers.rb', line 163</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_count_matcher'>get_count_matcher</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='id identifier rubyid_tests'>tests</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='comment'># This constructor is backward from all the rest and a bit qwirky in that
</span>  <span class='comment'># it inexplicably expects method to be an Array and args to be an Integer
</span>  <span class='comment'># rather than an Array like all the other matchers.  Further, this one
</span>  <span class='comment'># expects to receive method twice, as the first and third parameters or
</span>  <span class='comment'># part of method as the first and the whole method as the third or nil as
</span>  <span class='comment'># the first and method as the third.  Quite qwirky, indeed!  This helper
</span>  <span class='comment'># will steer clear of this qwirkiness by simply passing nil as the first
</span>  <span class='comment'># and ensuring that args can be cast as an Integer.
</span>  <span class='kw'>begin</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
      <span class='comment'># Assume the first element of an args array is the intended count
</span>      <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The argument to Count matchers must be a single Integer value.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'>ManifestMatchers</span><span class='op'>::</span><span class='const'>CountGeneric</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='id identifier rubyid_count'>count</span><span class='comma'>,</span>
    <span class='id identifier rubyid_method'>method</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_function_matcher-class_method">
  
    .<strong>get_function_matcher</strong>(method, args = [], tests = [])  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Gets a matcher for function (:run) tests.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Test a function that strips known extensions off file-names</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="RSpec::Puppet::MatcherHelpers (class)">MatcherHelpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_function_matcher'>get_function_matcher</span><span class='lparen'>(</span>
  <span class='symbol'>:run</span><span class='comma'>,</span>
  <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='lbracket'>[</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/some/arbitrary/path.ext</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ext</span><span class='tstring_end'>&#39;</span></span> <span class='rbracket'>]</span>
<span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>method</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The :run matcher type.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Optional[Variant[Integer,Array[Integer]]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p><strong>IGNORED</strong> in this version! Should a future version of the
compile matcher support constructor arguments, this will become useful.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tests</span>
      
      
        <span class='type'>(<tt>Optional[Variant[Symbol,String,Array[Any],Hash[Any,Any]]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Set of unit tests to apply to the matcher. Many forms of expressing these
tests is supported, though the best fit is <a href="Any">Array</a>, which
is passed as-is to the function under test as its parameters.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rspec-puppet/matcher_helpers.rb', line 257</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_function_matcher'>get_function_matcher</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_tests'>tests</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'>FunctionMatchers</span><span class='op'>::</span><span class='const'>Run</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nil</span><span class='tstring_end'>&#39;</span></span> <span class='op'>==</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
        <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_tests'>tests</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='comment'># Anything left is assumed to be a &#39;with_params&#39; test, which expects an
</span>    <span class='comment'># Array.
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:with_params</span><span class='comma'>,</span> <span class='id identifier rubyid_tests'>tests</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:with_params</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_tests'>tests</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_matcher'>matcher</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_matcher_for-class_method">
  
    .<strong>get_matcher_for</strong>(method, args, tests = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Attempts to create and return an appropriate RSpec::Puppet::*Matcher for a
known matching method and its arguments. If tests are provided and the
matcher supports them, the matcher will be built up with the tests.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>method</span>
      
      
        <span class='type'>(<tt>Variant[String,Symbol]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A recognizable RSpec::Puppet matcher; one of: contain<em>, create*,
have</em>count, compile, run, or be_valid_type (where * is a known resource
type).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Array[Any]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Arguments to pass to the matcher during construction, if it accepts any.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tests</span>
      
      
        <span class='type'>(<tt>Optional[Hash[Variant[String,Symbol],Any]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Set of unit tests to apply to the matcher, expressed as <code>:method_call
=&gt; value(s)</code> tuples. Use <code>nil</code> as the value for
method_calls that don&#39;t accept arguments.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An RSpec::Puppet matcher that knows how to handle <code>method</code> and
is loaded with <code>tests</code>.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NameError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>when <code>method</code> is unrecognizable.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rspec-puppet/matcher_helpers.rb', line 27</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_matcher_for'>get_matcher_for</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='id identifier rubyid_tests'>tests</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_method_str'>method_str</span> <span class='op'>=</span> <span class='id identifier rubyid_method'>method</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nil</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='id identifier rubyid_method'>method</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_method_sym'>method_sym</span> <span class='op'>=</span> <span class='id identifier rubyid_method'>method</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='symbol'>:nil</span> <span class='op'>:</span> <span class='id identifier rubyid_method'>method</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>

  <span class='kw'>case</span> <span class='id identifier rubyid_method_str'>method_str</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^(contain|create)_.+$</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="RSpec::Puppet::MatcherHelpers (class)">MatcherHelpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_contain_matcher'><span class='object_link'><a href="#get_contain_matcher-class_method" title="RSpec::Puppet::MatcherHelpers.get_contain_matcher (method)">get_contain_matcher</a></span></span><span class='lparen'>(</span>
      <span class='id identifier rubyid_method_sym'>method_sym</span><span class='comma'>,</span>
      <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span>
      <span class='id identifier rubyid_tests'>tests</span>
    <span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^have_.+_count$</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="RSpec::Puppet::MatcherHelpers (class)">MatcherHelpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_count_matcher'><span class='object_link'><a href="#get_count_matcher-class_method" title="RSpec::Puppet::MatcherHelpers.get_count_matcher (method)">get_count_matcher</a></span></span><span class='lparen'>(</span>
      <span class='id identifier rubyid_method_sym'>method_sym</span><span class='comma'>,</span>
      <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span>
      <span class='id identifier rubyid_tests'>tests</span>
    <span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compile</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="RSpec::Puppet::MatcherHelpers (class)">MatcherHelpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_compile_matcher'><span class='object_link'><a href="#get_compile_matcher-class_method" title="RSpec::Puppet::MatcherHelpers.get_compile_matcher (method)">get_compile_matcher</a></span></span><span class='lparen'>(</span>
      <span class='id identifier rubyid_method_sym'>method_sym</span><span class='comma'>,</span>
      <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span>
      <span class='id identifier rubyid_tests'>tests</span>
    <span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>run</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="RSpec::Puppet::MatcherHelpers (class)">MatcherHelpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_function_matcher'><span class='object_link'><a href="#get_function_matcher-class_method" title="RSpec::Puppet::MatcherHelpers.get_function_matcher (method)">get_function_matcher</a></span></span><span class='lparen'>(</span>
      <span class='id identifier rubyid_method_sym'>method_sym</span><span class='comma'>,</span>
      <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span>
      <span class='id identifier rubyid_tests'>tests</span>
    <span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>be_valid_type</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="RSpec::Puppet::MatcherHelpers (class)">MatcherHelpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_type_matcher'><span class='object_link'><a href="#get_type_matcher-class_method" title="RSpec::Puppet::MatcherHelpers.get_type_matcher (method)">get_type_matcher</a></span></span><span class='lparen'>(</span>
      <span class='id identifier rubyid_method_sym'>method_sym</span><span class='comma'>,</span>
      <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span>
      <span class='id identifier rubyid_tests'>tests</span>
    <span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NameError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unknown matcher method:  </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method_str'>method_str</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  See http://rspec-puppet.com/matchers/ for valid matchers.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_matcher'>matcher</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_type_matcher-class_method">
  
    .<strong>get_type_matcher</strong>(method, args = [], tests = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Gets a matcher for custom type (:be_valid_type) tests.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>With a particular provider (simple)</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="RSpec::Puppet::MatcherHelpers (class)">MatcherHelpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_type_matcher'>get_type_matcher</span><span class='lparen'>(</span>
  <span class='symbol'>:be_valid_type</span><span class='comma'>,</span>
  <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='symbol'>:apt</span>
<span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>With a particular provider (spelled out)</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="RSpec::Puppet::MatcherHelpers (class)">MatcherHelpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_type_matcher'>get_type_matcher</span><span class='lparen'>(</span>
  <span class='symbol'>:be_valid_type</span><span class='comma'>,</span>
  <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='lbrace'>{</span> <span class='symbol'>:with_provider</span> <span class='op'>=&gt;</span> <span class='symbol'>:apt</span> <span class='rbrace'>}</span>
<span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>method</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The :be_valid_type matcher type.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Optional[Variant[Integer,Array[Integer]]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p><strong>IGNORED</strong> in this version! Should a future version of
RSpec::Puppet::TypeMatchers::CreateGeneric support constructor arguments,
this will become useful.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tests</span>
      
      
        <span class='type'>(<tt>Optional[Hash[Variant[String,Symbol],Any]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Set of unit tests to apply to the matcher, expressed as <code>:method_call
=&gt; value(s)</code> tuples. Use <code>nil</code> as the value for
method_calls that don&#39;t accept arguments.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rspec-puppet/matcher_helpers.rb', line 308</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_type_matcher'>get_type_matcher</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_tests'>tests</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_matcher'>matcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Puppet.html" title="RSpec::Puppet (module)">Puppet</a></span></span><span class='op'>::</span><span class='const'>TypeMatchers</span><span class='op'>::</span><span class='const'>CreateGeneric</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span>
    <span class='id identifier rubyid_args'>args</span>
  <span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_test'>test</span><span class='op'>|</span> <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_test'>test</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nil</span><span class='tstring_end'>&#39;</span></span> <span class='op'>==</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
        <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_tests'>tests</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='comment'># Anything left is assumed to be a &#39;with_provider&#39; test
</span>    <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:with_provider</span><span class='comma'>,</span> <span class='id identifier rubyid_tests'>tests</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_matcher'>matcher</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Sep  6 04:17:58 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.9 (ruby-2.4.1).
</div>

    </div>
  </body>
</html>